/**
 * åˆå§‹åŒ–å…¨éƒ¨11ä¸ªé¢„è®¾å‰§æƒ…
 */
import { getDB } from '~/server/utils/db'

function generateId() {
  return Math.random().toString(36).substring(2, 8).toUpperCase()
}

const allDramas = [
  {
    name: 'ç»å‘½æ¯’å¸ˆï¼šç™½å…ˆç”Ÿçš„å¸å›½',
    description: 'åŒ–å­¦è€å¸ˆå˜æ¯’æ­ï¼ŒæƒåŠ›ã€è´ªå©ªä¸æ•‘èµçš„æ•…äº‹',
    event_background: `é«˜ä¸­åŒ–å­¦è€å¸ˆWalter Whiteè¢«è¯Šæ–­å‡ºè‚ºç™Œæ™šæœŸï¼Œä¸ºäº†ç»™å®¶äººç•™ä¸‹è¶³å¤Ÿçš„é’±ï¼Œä»–å†³å®šåˆ©ç”¨åŒ–å­¦çŸ¥è¯†åˆ¶é€ å†°æ¯’ã€‚ä»–ä¸å‰å­¦ç”ŸJesse Pinkmanåˆä½œï¼Œé€æ¸ä»å°ä½œåŠå‘å±•æˆæ¯’å“å¸å›½ã€‚`,
    avatar: 'âš—ï¸',
    npcs: [
      { name: 'Walter White', age: 50, occupation: 'åŒ–å­¦è€å¸ˆ/æ¯’æ­', avatar: 'ğŸ‘¨â€ğŸ”¬', profile: 'é«˜ä¸­åŒ–å­¦è€å¸ˆï¼Œè¢«è¯Šæ–­å‡ºç™Œç—‡åå¼€å§‹åˆ¶æ¯’', personality: 'èªæ˜ã€éª„å‚²ã€æ§åˆ¶æ¬²å¼º', skills: 'åŒ–å­¦ã€ç­–ç•¥ã€æ“çºµ', habits: 'æˆ´å¸½å­ã€ç²¾ç¡®è®¡ç®—', likes: 'æƒåŠ›ã€å°Šé‡', dislikes: 'è¢«çœ‹ä¸èµ·ã€å¤±æ§', background: 'æ›¾æ˜¯è¯ºè´å°”å¥–å›¢é˜Ÿæˆå‘˜', goals: 'ä¸ºå®¶äººç•™é’±ï¼Œå»ºç«‹å¸å›½', fears: 'å¤±å»å®¶åº­ã€è¢«æŠ“' },
      { name: 'Jesse Pinkman', age: 25, occupation: 'æ¯’è´©/åŠ©æ‰‹', avatar: 'ğŸ˜', profile: 'Walterçš„å‰å­¦ç”Ÿï¼Œå°æ··æ··å‡ºèº«', personality: 'å†²åŠ¨ã€å–„è‰¯ã€æƒ…ç»ªåŒ–', skills: 'åˆ¶æ¯’ã€è¡—å¤´æ™ºæ…§', habits: 'è¯´ä¿šè¯­ã€æŠ½çƒŸ', likes: 'è‡ªç”±ã€è‰ºæœ¯', dislikes: 'Walterçš„æ“çºµ', background: 'ä»é€ƒè¯¾ç”Ÿåˆ°åˆ¶æ¯’æ­æ¡£', goals: 'é€ƒç¦»è¿™ä¸ªè¡Œä¸š', fears: 'Walterã€æ­»äº¡' }
    ]
  },
  {
    name: 'ç”„å¬›ä¼ ï¼šåå®«é£äº‘',
    description: 'æ¸…å®«å¥³æ€§æƒåŠ›æ–—äº‰ï¼Œæ™ºæ…§ä¸å‘½è¿çš„è¾ƒé‡',
    event_background: `é›æ­£å¹´é—´ï¼Œç”„å¬›å…¥å®«é€‰ç§€ï¼Œå› å®¹è²Œé…·ä¼¼çš‡å¸äº¡å¦»çº¯å…ƒçš‡åè€Œå—å® ã€‚åå®«ä¸­ï¼Œçš‡åè¡¨é¢è´¤è‰¯å®åˆ™é˜´ç‹ ï¼Œåå¦ƒä¾ä»—å¹´ç¾¹å°§æƒåŠ¿éª„æ¨ªè·‹æ‰ˆã€‚`,
    avatar: 'ğŸ‘‘',
    npcs: [
      { name: 'ç”„å¬›', age: 17, occupation: 'å¦ƒå«”', avatar: 'ğŸ‘¸', profile: 'ä»å•çº¯åˆ°è…¹é»‘çš„å®Œç¾èœ•å˜', personality: 'èªæ…§ã€åšéŸ§ã€è…¹é»‘', skills: 'è¯—è¯ã€ç´æ£‹ä¹¦ç”»ã€å®«æ–—', habits: 'è§‚å¯Ÿç»†èŠ‚ã€ä»¥é€€ä¸ºè¿›', likes: 'çœŸæƒ…ã€è‡ªç”±', dislikes: 'èƒŒå›ã€è™šä¼ª', background: 'åé—¨ä¹‹å¥³å…¥å®«', goals: 'ä¿æŠ¤å®¶äººã€æŒæ¡æƒåŠ›', fears: 'å®¶æ—è¢«å®³' },
      { name: 'çš‡å', age: 35, occupation: 'ä¸­å®«çš‡å', avatar: 'ğŸ‘¸â€â™€ï¸', profile: 'è¡¨é¢è´¤è‰¯å®åˆ™å¿ƒæœºæ·±æ²‰', personality: 'é˜´é™©ã€å–„äºä¼ªè£…', skills: 'å®«æ–—ã€ä¸‹æ¯’ã€æŒ‘æ‹¨', habits: 'è£…ç—…ã€æš—ä¸­å¸ƒå±€', likes: 'æƒåŠ›ã€æ§åˆ¶', dislikes: 'ç”„å¬›ã€å¨èƒ', background: 'æ»¡é—¨è´µæ—', goals: 'å·©å›ºåä½', fears: 'çœŸç›¸æš´éœ²' }
    ]
  },
  {
    name: 'NBAæ€»å†³èµ›ï¼šæ¹–äººvså‡¯å°”ç‰¹äºº',
    description: 'ç´«é‡‘ç‹æœä¸ç»¿å†›ä¼ å¥‡çš„ä¸–çºªå¯¹å†³',
    event_background: `2024å¹´NBAæ€»å†³èµ›ï¼Œæ´›æ‰çŸ¶æ¹–äººå¯¹é˜µæ³¢å£«é¡¿å‡¯å°”ç‰¹äººã€‚è©¹å§†æ–¯å·²39å²ä½†ä¾ç„¶å¼ºåŠ¿ï¼Œæµ“çœ‰æˆ´ç»´æ–¯çŠ¶æ€å›æš–ã€‚å‡¯å°”ç‰¹äººåˆ™æ˜¯å¡”å›¾å§†å’Œå¸ƒæœ—çš„åŒæ ¸é©±åŠ¨ã€‚`,
    avatar: 'ğŸ€',
    npcs: [
      { name: 'LeBron James', age: 39, occupation: 'æ¹–äººå‰é”‹', avatar: 'ğŸ‘‘', profile: 'å†å²ç¬¬äºŒäººï¼Œè¿½æ±‚ç¬¬5å† ', personality: 'é¢†è¢–æ°”è´¨ã€æ™ºå•†é«˜ã€å¥½èƒœ', skills: 'å…¨èƒ½ã€ç¯®çƒæ™ºå•†ã€é¢†å¯¼åŠ›', habits: 'èµ›å‰æ³¡å†°æµ´ã€çœ‹å½•åƒ', likes: 'èµ¢çƒã€å®¶åº­ã€å•†ä¸š', dislikes: 'è¾“çƒã€è¢«è´¨ç–‘', background: '03é»„é‡‘ä¸€ä»£', goals: 'ç¬¬5å† ã€è¶…è¶Šä¹”ä¸¹', fears: 'è€å»ã€å¤±å»ç»Ÿæ²»åŠ›' },
      { name: 'Jayson Tatum', age: 26, occupation: 'å‡¯å°”ç‰¹äººå‰é”‹', avatar: 'ğŸŒŸ', profile: 'æ–°ç”Ÿä»£é¢†è¢–ï¼ŒæŠ€æœ¯å…¨é¢', personality: 'å†·é™ã€è‡ªä¿¡ã€æ±‚èƒœæ¬²å¼º', skills: 'å¾—åˆ†ã€é˜²å®ˆã€å…³é”®çƒ', habits: 'èµ›å‰å†¥æƒ³ã€çœ‹ç§‘æ¯”å½•åƒ', likes: 'è¯æ˜è‡ªå·±ã€ç§‘æ¯”', dislikes: 'è¢«æ¯”è¾ƒã€è´¨ç–‘', background: '2017å¹´é€‰ç§€', goals: 'å‡»è´¥è©¹å§†æ–¯ã€å¤ºå† ', fears: 'è¾“ç»™è©¹å§†æ–¯' }
    ]
  },
  {
    name: 'å¸åœˆé£äº‘ï¼šFTXå´©ç›˜å§‹æœ«',
    description: 'åŠ å¯†è´§å¸å¸å›½çš„å´›èµ·ä¸å´©å¡Œ',
    event_background: `2022å¹´11æœˆï¼Œå…¨çƒç¬¬äºŒå¤§åŠ å¯†è´§å¸äº¤æ˜“æ‰€FTXçªç„¶å´©ç›˜ï¼Œåˆ›å§‹äººSBFä»ç¡…è°·å¤©æ‰æ²¦ä¸ºé˜¶ä¸‹å›šã€‚å¸å®‰CEOèµµé•¿é¹çœ‹ç©¿å±æœºæå‰æŠ›å”®ã€‚`,
    avatar: 'ğŸ’°',
    npcs: [
      { name: 'Sam Bankman-Fried', age: 30, occupation: 'FTXåˆ›å§‹äºº/CEO', avatar: 'ğŸ¤“', profile: 'ä»å¤©æ‰åˆ°å¸åœˆæ•‘ä¸–ä¸»å†åˆ°è¯ˆéª—çŠ¯', personality: 'èªæ˜ã€å‚²æ…¢ã€è‡ªæˆ‘æ¬ºéª—', skills: 'é‡åŒ–äº¤æ˜“ã€ç¼–ç¨‹ã€å…¬å…³', habits: 'ç©æ¸¸æˆã€ç©¿çŸ­è£¤æ‹–é‹', likes: 'æœ‰æ•ˆåˆ©ä»–ä¸»ä¹‰ã€å½±å“åŠ›', dislikes: 'ç›‘ç®¡ã€è¢«è´¨ç–‘', background: 'MITæ¯•ä¸šï¼Œä¸€åº¦èº«å®¶260äº¿', goals: 'æˆä¸ºä¸–ç•Œé¦–å¯Œ', fears: 'å¤±å»ä¸€åˆ‡ã€å…¥ç‹±' },
      { name: 'èµµé•¿é¹(CZ)', age: 46, occupation: 'å¸å®‰CEO', avatar: 'ğŸ‰', profile: 'å¸åœˆæ•™çˆ¶ï¼Œä¸€æ¡æ¨ç‰¹å¼•å‘é›ªå´©', personality: 'å†·é™ã€å•†ä¸šå¤´è„‘ã€æœæ–­', skills: 'äº¤æ˜“ç³»ç»Ÿã€é£é™©æ§åˆ¶', habits: 'å¥èº«ã€è°¨æ…å‘æ¨', likes: 'å¸‚åœºä¸»å¯¼ã€ç”¨æˆ·ä¿¡ä»»', dislikes: 'FTXçš„å¨èƒ', background: 'éº¦å½“åŠ³æ‰“å·¥åˆ°å¸åœˆé¦–å¯Œ', goals: 'æ¶ˆç­ç«äº‰å¯¹æ‰‹', fears: 'ç›‘ç®¡æ¸…ç®—' }
    ]
  },
  {
    name: '2024ç¾å›½å¤§é€‰ï¼šç‰¹æœ—æ™®vsæ‹œç™»',
    description: 'åˆ†è£‚ç¾å›½çš„ç»ˆæå¯¹å†³',
    event_background: `2024å¹´ç¾å›½æ€»ç»Ÿå¤§é€‰ï¼Œ81å²çš„æ‹œç™»å¯¹é˜µ78å²çš„ç‰¹æœ—æ™®ã€‚ç‰¹æœ—æ™®é¢ä¸´å¤šé¡¹åˆ‘äº‹æŒ‡æ§å´æ”¯æŒç‡ä¸é™åå‡ï¼Œæ‹œç™»è¢«è´¨ç–‘å¹´é¾„å’Œèƒ½åŠ›ã€‚`,
    avatar: 'ğŸ—³ï¸',
    npcs: [
      { name: 'Donald Trump', age: 78, occupation: 'å‰æ€»ç»Ÿ/å…±å’Œå…šå€™é€‰äºº', avatar: 'ğŸ¦', profile: 'å‰æ€»ç»Ÿï¼Œé¢ä¸´91é¡¹æŒ‡æ§ä»å¼ºåŠ¿å‚é€‰', personality: 'è‡ªä¿¡ã€å¥½æ–—ã€æ°‘ç²¹', skills: 'æ¼”è®²ã€ç¤¾äº¤åª’ä½“ã€é€ åŠ¿', habits: 'å‘æ¨ã€é›†ä¼šæ¼”è®²ã€æ‰“é«˜å°”å¤«', likes: 'å¿ è¯šã€èµ¢ã€è¢«å´‡æ‹œ', dislikes: 'åª’ä½“ã€è´¥é€‰ã€è¢«èµ·è¯‰', background: 'åœ°äº§å¤§äº¨ã€45ä»»æ€»ç»Ÿ', goals: 'é‡è¿”ç™½å®«ã€æ¨ç¿»èµ·è¯‰', fears: 'å…¥ç‹±ã€å½»åº•å¤±è´¥' },
      { name: 'Joe Biden', age: 81, occupation: 'ç°ä»»æ€»ç»Ÿ', avatar: 'ğŸ‘´', profile: '81å²é«˜é¾„ï¼Œäº‰å–è¿ä»»', personality: 'æ¸©å’Œã€ä¼ ç»Ÿã€å›ºæ‰§', skills: 'å¤–äº¤ã€å»ºåˆ¶æ´¾æ”¿æ²»', habits: 'æ—©ç¡ã€è¯»ç¨¿', likes: 'å®¶åº­ã€å†°æ·‡æ·‹ã€æ°‘ä¸»', dislikes: 'ç‰¹æœ—æ™®ã€æ··ä¹±', background: 'å‚è®®å‘˜36å¹´ã€å‰¯æ€»ç»Ÿ8å¹´', goals: 'è¿ä»»ã€é˜»æ­¢ç‰¹æœ—æ™®', fears: 'è¾“ç»™ç‰¹æœ—æ™®' }
    ]
  },
  {
    name: 'ç¡…è°·å¤§ä½¬ï¼šé©¬æ–¯å…‹ä¸ç‰¹æœ—æ™®è”ç›Ÿ',
    description: 'ç§‘æŠ€ä¸æ”¿æ²»çš„å±é™©ç»“åˆ',
    event_background: `2024å¹´ï¼Œé©¬æ–¯å…‹å…¬å¼€æ”¯æŒç‰¹æœ—æ™®ï¼Œä¸¤ä½ç¾å›½æœ€å…·äº‰è®®çš„äººç‰©ç»“ç›Ÿã€‚é©¬æ–¯å…‹æ‰¿è¯ºå¦‚æœç‰¹æœ—æ™®å½“é€‰å°†åŠ å…¥æ”¿åºœ"æ•ˆç‡å§”å‘˜ä¼š"ã€‚`,
    avatar: 'ğŸ’',
    npcs: [
      { name: 'Elon Musk', age: 52, occupation: 'ç‰¹æ–¯æ‹‰/SpaceX/X CEO', avatar: 'ğŸš€', profile: 'ä¸–ç•Œé¦–å¯Œï¼Œå…¨åŠ›æ”¯æŒç‰¹æœ—æ™®', personality: 'å¤©æ‰ã€ç‹‚å¦„ã€å†²åŠ¨ã€å³å€¾', skills: 'å·¥ç¨‹ã€å•†ä¸šã€ç¤¾äº¤åª’ä½“', habits: 'å·¥ä½œç‹‚ã€å‘æ¨ã€æ‰“æ¸¸æˆ', likes: 'ç‰¹æœ—æ™®ã€è‡ªç”±å¸‚åœºã€ç«ç®­', dislikes: 'ç›‘ç®¡ã€å·¦æ´¾ã€ä¼ ç»Ÿåª’ä½“', background: 'ä»å—éåˆ°ç¡…è°·ï¼Œä¹°ä¸‹æ¨ç‰¹', goals: 'å½±å“æ”¿æ²»ã€å‡å°‘ç›‘ç®¡', fears: 'æ”¿åºœæ‰“å‹ã€å¤±å»å½±å“åŠ›' },
      { name: 'Donald Trump', age: 78, occupation: 'å‰æ€»ç»Ÿ', avatar: 'ğŸ¦', profile: 'ä¸é©¬æ–¯å…‹ç»“ç›Ÿï¼Œæ‰¿è¯ºç»™ä»–æ”¿åºœèŒä½', personality: 'æ°‘ç²¹ã€äº¤æ˜“å‹ã€ä¸å¯é¢„æµ‹', skills: 'æ¼”è®²ã€é€ åŠ¿ã€æ‰“å‹å¯¹æ‰‹', habits: 'å‘Truth Socialã€å¼€é›†ä¼š', likes: 'å¿ è¯šã€å•†ä¸šã€é©¬æ–¯å…‹çš„æ”¯æŒ', dislikes: 'èƒŒå›ã€åª’ä½“', background: 'å•†äººè½¬æ”¿å®¢', goals: 'é‡è¿”ç™½å®«ã€åˆ©ç”¨é©¬æ–¯å…‹', fears: 'è´¥é€‰ã€å…¥ç‹±' }
    ]
  },
  {
    name: 'ä¸­ç¾ç§‘æŠ€æˆ˜ï¼šèŠ¯ç‰‡å°é”',
    description: 'ä¸¤ä¸ªè¶…çº§å¤§å›½çš„ç§‘æŠ€å†·æˆ˜',
    event_background: `2023å¹´10æœˆï¼Œç¾å›½å¯¹åèŠ¯ç‰‡å‡ºå£å†æ¬¡å‡çº§ç®¡åˆ¶ã€‚åä¸ºé€šè¿‡ä¸­èŠ¯å›½é™…çªç ´7nmåˆ¶ç¨‹ï¼Œéœ‡æƒŠè¥¿æ–¹ã€‚å°ç§¯ç”µè¢«è¦æ±‚é€‰è¾¹ç«™ã€‚`,
    avatar: 'ğŸ”¬',
    npcs: [
      { name: 'é»„ä»å‹‹', age: 60, occupation: 'è‹±ä¼Ÿè¾¾CEO', avatar: 'ğŸ‘¨â€ğŸ’¼', profile: 'AIèŠ¯ç‰‡ä¹‹ç‹ï¼Œå·¦å³ä¸ºéš¾äºä¸­ç¾ä¹‹é—´', personality: 'èªæ˜ã€å•†ä¸šå¯¼å‘ã€åŠ¡å®', skills: 'èŠ¯ç‰‡è®¾è®¡ã€å•†ä¸šç­–ç•¥', habits: 'ç©¿çš®è¡£ã€ä¸»é¢˜æ¼”è®²', likes: 'ä¸­å›½å¸‚åœºã€AIå‘å±•', dislikes: 'å‡ºå£ç®¡åˆ¶ã€æ”¿æ²»åŒ–', background: 'å°æ¹¾å‡ºç”Ÿï¼Œç¾å›½é•¿å¤§', goals: 'ä¿æŒä¸­å›½å¸‚åœº', fears: 'å½»åº•å¤±å»ä¸­å›½' },
      { name: 'ä½™æ‰¿ä¸œ', age: 54, occupation: 'åä¸ºæ¶ˆè´¹è€…ä¸šåŠ¡CEO', avatar: 'ğŸ“±', profile: 'åä¸ºæ——æ‰‹ï¼Œæ¨å‡ºMate60éœ‡æƒŠä¸–ç•Œ', personality: 'å¥½æ–—ã€çˆ±å¹ç‰›ã€ä¸æœè¾“', skills: 'äº§å“ã€è¥é”€ã€å±æœºåº”å¯¹', habits: 'å¼€å‘å¸ƒä¼šã€æ”¾ç‹ è¯', likes: 'è¶…è¶Šè‹¹æœã€è¯æ˜åä¸º', dislikes: 'ç¾å›½åˆ¶è£ã€è´¨ç–‘', background: 'åä¸ºè€å°†ï¼Œæ‰‹æœºä¸šåŠ¡æŒèˆµäºº', goals: 'è®©åä¸ºå›åˆ°ä¸–ç•Œç¬¬ä¸€', fears: 'æŒç»­åˆ¶è£ã€å¤±å»å¸‚åœº' }
    ]
  },
  {
    name: 'OpenAIå®«æ–—ï¼šå¥¥ç‰¹æ›¼è¢«ç½¢å…48å°æ—¶',
    description: 'AIæ—¶ä»£æœ€æˆå‰§æ€§çš„è‘£äº‹ä¼šæ”¿å˜',
    event_background: `2023å¹´11æœˆ17æ—¥ï¼ŒOpenAIè‘£äº‹ä¼šçªç„¶è§£é›‡CEO Sam Altmanã€‚48å°æ—¶å†…ï¼Œ700åå‘˜å·¥å¨èƒè¾èŒï¼Œå¾®è½¯ä»‹å…¥ï¼ŒAltmanæˆå‰§æ€§å›å½’ã€‚`,
    avatar: 'ğŸ¤–',
    npcs: [
      { name: 'Sam Altman', age: 38, occupation: 'OpenAI CEO', avatar: 'ğŸ‘¨â€ğŸ’¼', profile: 'AIæ•™çˆ¶ï¼Œè¢«ç½¢å…åˆå¼ºåŠ¿å›å½’', personality: 'èªæ˜ã€åœ†æ»‘ã€é‡å¿ƒå‹ƒå‹ƒ', skills: 'AIã€ç­¹æ¬¾ã€æ”¿æ²»ã€å±æœºå…¬å…³', habits: 'é¢„æµ‹æœªæ¥ã€ä¸æƒè´µäº¤å¾€', likes: 'AGIåŠ é€Ÿã€æƒåŠ›ã€å½±å“åŠ›', dislikes: 'è¢«é™åˆ¶ã€ä¿å®ˆæ´¾', background: 'YCå‰æ€»è£', goals: 'å‘å±•AGIã€ä¿æŒæ§åˆ¶', fears: 'å†æ¬¡è¢«ç½¢å…ã€ç«äº‰å¯¹æ‰‹è¶…è¶Š' },
      { name: 'Ilya Sutskever', age: 37, occupation: 'OpenAIé¦–å¸­ç§‘å­¦å®¶', avatar: 'ğŸ§ ', profile: 'AIå¤©æ‰ï¼Œå‘åŠ¨æ”¿å˜ååæ‚”', personality: 'å¤©æ‰ã€ç†æƒ³ä¸»ä¹‰ã€ä¼˜æŸ”å¯¡æ–­', skills: 'AIç ”ç©¶ã€æ·±åº¦å­¦ä¹ ', habits: 'æ€è€ƒAIå®‰å…¨ã€çŠ¹è±«', likes: 'AIå®‰å…¨ã€ç§‘å­¦ç ”ç©¶', dislikes: 'AIè¿‡å¿«å•†ä¸šåŒ–', background: 'Hintonå­¦ç”Ÿï¼ŒGPTä¹‹çˆ¶', goals: 'ç¡®ä¿AIå®‰å…¨', fears: 'AIç¾éš¾ã€å¤±å»æœ‹å‹' }
    ]
  },
  {
    name: 'ä¿„ä¹Œæˆ˜äº‰ï¼šç“¦æ ¼çº³å›ä¹±',
    description: 'æˆ˜äº‰ä¸­çš„æˆ˜äº‰ï¼Œé›‡ä½£å†›å›ä¹±éœ‡åŠ¨å…‹é‡Œå§†æ—å®«',
    event_background: `2023å¹´6æœˆ23æ—¥ï¼Œç“¦æ ¼çº³é›†å›¢åˆ›å§‹äººæ™®é‡Œæˆˆæ´¥å‘åŠ¨å›ä¹±ï¼Œå¦å…‹å‘è«æ–¯ç§‘æ¨è¿›ã€‚24å°æ—¶åï¼Œæ™®é‡Œæˆˆæ´¥æ’¤å†›ã€‚ä¸¤ä¸ªæœˆåï¼Œä»–çš„é£æœºåœ¨è«æ–¯ç§‘ä¸Šç©ºçˆ†ç‚¸ã€‚`,
    avatar: 'âš”ï¸',
    npcs: [
      { name: 'Yevgeny Prigozhin', age: 62, occupation: 'ç“¦æ ¼çº³é›†å›¢åˆ›å§‹äºº', avatar: 'ğŸ’€', profile: '"æ™®äº¬çš„å¨å¸ˆ"å˜æˆå›å†›é¦–é¢†', personality: 'ç²—é²ã€å‹‡çŒ›ã€å†²åŠ¨', skills: 'é›‡ä½£å†›ã€æˆ˜æœ¯ã€åŠ¨å‘˜', habits: 'éª‚å›½é˜²éƒ¨ã€è§†é¢‘æ¼”è®²', likes: 'æ™®äº¬ï¼ˆæ›¾ç»ï¼‰ã€ç“¦æ ¼çº³ã€è£èª‰', dislikes: 'ç»ä¼Šå¤ã€è…è´¥', background: 'ä»é¤é¥®å¤§äº¨åˆ°é›‡ä½£å†›è€æ¿', goals: 'æ¨ç¿»å›½é˜²éƒ¨é¢†å¯¼', fears: 'è¢«æ¸…ç®—ã€å¤±å»å†›é˜Ÿ' },
      { name: 'Vladimir Putin', age: 71, occupation: 'ä¿„ç½—æ–¯æ€»ç»Ÿ', avatar: 'ğŸ»', profile: 'ç‹¬è£è€…ï¼Œæƒå¨å—åˆ°æŒ‘æˆ˜', personality: 'å†·é…·ã€å¤šç–‘ã€å¼ºç¡¬', skills: 'æƒ…æŠ¥ã€æƒè°‹ã€æŸ”é“', habits: 'å­¤ç«‹ã€é•¿æ¡Œä¼šè®®', likes: 'å¿ è¯šã€æƒåŠ›ã€æŸ”é“', dislikes: 'èƒŒå›ã€åŒ—çº¦ã€è¥¿æ–¹', background: 'KGBå‡ºèº«ï¼ŒæŒæƒ20ä½™å¹´', goals: 'æ¢å¤ä¿„ç½—æ–¯è£è€€', fears: 'æ”¿å˜ã€å¤±è´¥' }
    ]
  },
  {
    name: 'å¨±ä¹åœˆé£æš´ï¼šé¡¶æµæ˜æ˜Ÿå¡Œæˆ¿äº‹ä»¶',
    description: 'ä¸€åœºæµé‡ã€èµ„æœ¬ä¸é“å¾·çš„ç»ˆæå¯¹å†³',
    event_background: `2024å¹´ï¼Œé¡¶æµç”·æ˜Ÿé™†æ™¨è¢«æ›å¤šæ¬¡å‡ºè½¨ã€å·ç¨æ¼ç¨2äº¿ã€‚ç»çºªäººè¯•å›¾å…¬å…³å‹çƒ­æœï¼Œå‰å¥³å‹å‘é•¿æ–‡æ­éœ²è¢«PUAï¼Œç²‰ä¸å›¢å¼€å§‹è„±ç²‰ã€‚`,
    avatar: 'ğŸŒŸ',
    npcs: [
      { name: 'é™†æ™¨', age: 32, occupation: 'é¡¶æµç”·æ˜Ÿ', avatar: 'ğŸ¬', profile: 'é¡¶æµæ˜æ˜Ÿï¼Œäººè®¾å´©å¡Œ', personality: 'è‡ªç§ã€è™šä¼ªã€å‚²æ…¢', skills: 'æ¼”æˆã€è¥é”€ã€ä¼ªè£…', habits: 'å‡ºè½¨ã€å·ç¨ã€PUA', likes: 'ååˆ©ã€å¥³è‰²ã€é‡‘é’±', dislikes: 'æ›å…‰ã€è´Ÿé¢æ–°é—»', background: 'é€‰ç§€å‡ºé“ï¼Œåå¹´æ‰“é€ å®Œç¾äººè®¾', goals: 'ä¿ä½äººè®¾ã€åº¦è¿‡å±æœº', fears: 'å½»åº•å¡Œæˆ¿ã€å…¥ç‹±' },
      { name: 'æ—å§', age: 45, occupation: 'é‡‘ç‰Œç»çºªäºº', avatar: 'ğŸ’¼', profile: 'é™†æ™¨çš„ç»çºªäººï¼Œå…¬å…³æ‰‹æ®µé«˜è¶…', personality: 'ç²¾æ˜ã€å†·è¡€ã€ä¸æ‹©æ‰‹æ®µ', skills: 'å…¬å…³ã€èµ„æºã€æ§è¯„', habits: 'åˆ å¸–æ§è¯„ã€è”ç³»åª’ä½“', likes: 'æµé‡ã€é‡‘é’±ã€æ§åˆ¶å±€é¢', dislikes: 'å¤±æ§ã€è‰ºäººä¸å¬è¯', background: 'å¨±ä¹åœˆè€æ±Ÿæ¹–', goals: 'ä¿ä½é™†æ™¨ã€ä¿ä½è‡ªå·±', fears: 'é™†æ™¨å½»åº•å¡Œæˆ¿' }
    ]
  },
  {
    name: 'ç»§æ‰¿è€…ä»¬ï¼šåŠå…¬å®¤æƒåŠ›æ¸¸æˆ',
    description: 'å®¶æ—ä¼ä¸šç»§æ‰¿æƒäº‰å¤ºæˆ˜',
    event_background: `å¤©åç§‘æŠ€é›†å›¢çš„åˆ›å§‹äººé™ˆå¤©åçªç„¶å»ä¸–ï¼Œé—å˜±å°†åœ¨ä¸‰å¤©åå…¬å¸ƒã€‚é•¿å­é™ˆæµ©æ˜¯æŠ€æœ¯æ€»ç›‘ï¼Œæ¬¡å¥³é™ˆé›ªæ˜¯è¿è¥æ€»ç›‘ï¼Œè¿˜æœ‰ç§ç”Ÿå­æ—å³°ã€‚è€ç§˜ä¹¦ç‹èŠ³çŸ¥é“æ‰€æœ‰ç§˜å¯†ï¼Œå®¶æ—å¾‹å¸ˆå¼ å­å¢¨æ‰‹æ¡é—å˜±ã€‚`,
    avatar: 'ğŸ¢',
    npcs: [
      { name: 'é™ˆæµ©', age: 35, occupation: 'æŠ€æœ¯æ€»ç›‘/é•¿å­', avatar: 'ğŸ‘¨â€ğŸ’¼', profile: 'æ­£ç›´ä½†ä¸å–„æƒè°‹çš„ç»§æ‰¿äºº', personality: 'æ­£ç›´ã€ç†æƒ³ä¸»ä¹‰ã€å›ºæ‰§', skills: 'æŠ€æœ¯ç®¡ç†ã€äº§å“è®¾è®¡ã€æ¼”è®²', habits: 'æ™¨è·‘ã€ç‹¬è‡ªæ€è€ƒ', likes: 'æŠ€æœ¯åˆ›æ–°ã€è¯šä¿¡ç»è¥', dislikes: 'åŠå…¬å®¤æ”¿æ²»ã€è™šä¼ª', background: 'æ–¯å¦ç¦å¤§å­¦æ¯•ä¸šï¼Œè¢«å½“ä½œç»§æ‰¿äººåŸ¹å…»', goals: 'ç»§æ‰¿çˆ¶äº²é—å¿—', fears: 'å¤±å»å…¬å¸æ§åˆ¶æƒ' },
      { name: 'é™ˆé›ª', age: 32, occupation: 'è¿è¥æ€»ç›‘/æ¬¡å¥³', avatar: 'ğŸ‘©â€ğŸ’¼', profile: 'è¡¨é¢æ¸©å’Œå®åˆ™å¿ƒæœºæ·±æ²‰', personality: 'é˜´é™©ã€å–„äºä¼ªè£…ã€æ§åˆ¶æ¬²å¼º', skills: 'äººé™…æ“çºµã€æˆ˜ç•¥è§„åˆ’ã€è´¢åŠ¡', habits: 'æ”¶é›†æŠŠæŸ„ã€æ·±å¤œå·¥ä½œ', likes: 'æƒåŠ›ã€é‡‘é’±ã€æ§åˆ¶ä»–äºº', dislikes: 'è¢«è´¨ç–‘ã€é™ˆæµ©çš„æ­£ç›´', background: 'è‹±å›½ç•™å­¦ï¼Œæš—ä¸­åŸ¹æ¤åŠ¿åŠ›', goals: 'ä¸æ‹©æ‰‹æ®µå¤ºå–å…¬å¸æ§åˆ¶æƒ', fears: 'ç§˜å¯†è¢«æ­éœ²' }
    ]
  }
]

export default defineEventHandler(async (event) => {
  try {
    const db = getDB()
    
    // æ£€æŸ¥æ˜¯å¦å·²ç»åˆå§‹åŒ–
    const existingCount = db.prepare('SELECT COUNT(*) as count FROM stories').get().count
    
    if (existingCount > 0) {
      return { 
        success: true, 
        message: 'é¢„è®¾å‰§æƒ…å·²å­˜åœ¨ï¼Œæ— éœ€é‡å¤åˆå§‹åŒ–',
        totalStories: existingCount
      }
    }
    
    let totalStories = 0
    let totalNPCs = 0
    
    // æ’å…¥æ‰€æœ‰é¢„è®¾å‰§æƒ…å’ŒNPC
    for (const drama of allDramas) {
      const storyId = generateId()
      
      db.prepare(`
        INSERT INTO stories (id, name, description, event_background, dialogue_density, avatar, created_at, updated_at)
        VALUES (?, ?, ?, ?, ?, ?, datetime('now'), datetime('now'))
      `).run(
        storyId,
        drama.name,
        drama.description,
        drama.event_background,
        3,
        drama.avatar
      )
      
      totalStories++
      
      for (const npc of drama.npcs) {
        db.prepare(`
          INSERT INTO npcs (
            story_id, name, age, occupation, avatar, profile,
            personality, skills, habits, likes, dislikes,
            background, goals, fears, created_at
          ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, datetime('now'))
        `).run(
          storyId,
          npc.name,
          npc.age || null,
          npc.occupation || null,
          npc.avatar || null,
          npc.profile || null,
          npc.personality || null,
          npc.skills || null,
          npc.habits || null,
          npc.likes || null,
          npc.dislikes || null,
          npc.background || null,
          npc.goals || null,
          npc.fears || null
        )
        
        totalNPCs++
      }
    }
    
    return {
      success: true,
      message: `æˆåŠŸåŠ è½½ ${totalStories} ä¸ªå‰§æƒ…å’Œ ${totalNPCs} ä¸ªè§’è‰²`,
      totalStories,
      totalNPCs
    }
    
  } catch (error: any) {
    console.error('åˆå§‹åŒ–å¤±è´¥:', error)
    return {
      success: false,
      error: error.message
    }
  }
})

