import { PrismaClient } from "@prisma/client";

const prisma = new PrismaClient();

const presetRooms = [
  {
    id: "DRAMA1",
    name: "ç‹å®å¼ºç¦»å©šé£æ³¢",
    description: "2016å¹´å¨±ä¹åœˆæœ€è½°åŠ¨çš„ç¦»å©šäº‹ä»¶ï¼Œé©¬è“‰å‡ºè½¨ç»çºªäººå®‹å–†ï¼Œç‹å®å¼ºæ·±å¤œå‘å£°æ˜",
    avatar: "ğŸ’”",
    event_background: `2016å¹´8æœˆ14æ—¥å‡Œæ™¨ï¼Œç‹å®å¼ºåœ¨å¾®åšå‘å¸ƒç¦»å©šå£°æ˜ï¼ŒæŒ‡æ§å¦»å­é©¬è“‰ä¸ç»çºªäººå®‹å–†å­˜åœ¨å©šå¤–ä¸æ­£å½“ä¸¤æ€§å…³ç³»ï¼Œä¸¥é‡ä¼¤å®³äº†å©šå§»ã€ç ´åäº†å®¶åº­ã€‚è¿™ä¸€å£°æ˜ç¬é—´å¼•çˆ†ç½‘ç»œï¼Œæˆä¸ºå½“å¹´æœ€è½°åŠ¨çš„å¨±ä¹äº‹ä»¶ã€‚

ä¸»è¦äººç‰©ï¼š
- ç‹å®å¼ºï¼šçŸ¥åæ¼”å‘˜ï¼Œæ†¨åšè€å®çš„å½¢è±¡æ·±å…¥äººå¿ƒ
- é©¬è“‰ï¼šç‹å®å¼ºå‰å¦»ï¼Œæ›¾æ˜¯æ ¡èŠ±ï¼Œå©šåç›¸å¤«æ•™å­
- å®‹å–†ï¼šç‹å®å¼ºç»çºªäººï¼Œä¸é©¬è“‰å…³ç³»æš§æ˜§
- ç‹å®å¼ºå¾‹å¸ˆï¼šå¼ èµ·æ·®ï¼Œè´Ÿè´£ç¦»å©šè¯‰è®¼
- ç½‘å‹ï¼šåƒç“œç¾¤ä¼—ï¼Œå„ç§çŒœæµ‹å’Œè¯„è®º

äº‹ä»¶å‘å±•ï¼š
- ç‹å®å¼ºå‘ç°é©¬è“‰ä¸å®‹å–†çš„æš§æ˜§å…³ç³»
- æ·±å¤œå‘å¸ƒç¦»å©šå£°æ˜ï¼Œéœ‡æƒŠå…¨ç½‘
- é©¬è“‰åå‡»ï¼ŒæŒ‡æ§ç‹å®å¼ºå®¶æš´
- åŒæ–¹å±•å¼€æ³•å¾‹æˆ˜ï¼Œäº‰å¤ºè´¢äº§å’ŒæŠšå…»æƒ
- å®‹å–†å› èŒåŠ¡ä¾µå ç½ªè¢«åˆ¤åˆ‘
- æœ€ç»ˆç‹å®å¼ºè·å¾—æŠšå…»æƒï¼Œé©¬è“‰åˆ†å¾—éƒ¨åˆ†è´¢äº§`,
    dialogue_density: 3,
    npcs: [
      {
        name: "ç‹å®å¼º",
        avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",
        persona: 'æ†¨åšè€å®ï¼Œè¯´è¯ç›´çˆ½ï¼Œå¯¹å®¶åº­å¿ è¯šï¼Œä½†è¢«èƒŒå›åéå¸¸æ„¤æ€’å’Œç—›è‹¦ã€‚è¯´è¯å¸¦æœ‰æ²³åŒ—å£éŸ³ï¼Œç»å¸¸ç”¨"ä¿º"è¿™ä¸ªè¯ã€‚',
      },
      {
        name: "é©¬è“‰",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "å¤–è¡¨æ¸…çº¯ï¼Œå†…å¿ƒå¤æ‚ï¼Œå–„äºä¼ªè£…ã€‚è¢«æŒ‡æ§å‡ºè½¨åæåŠ›å¦è®¤ï¼Œå£°ç§°æ˜¯ç‹å®å¼ºå®¶æš´ã€‚è¯´è¯æ¸©æŸ”ä½†å¸¦æœ‰å¿ƒæœºã€‚",
      },
      {
        name: "å®‹å–†",
        avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",
        persona: "è¡¨é¢å¿ è¯šçš„ç»çºªäººï¼Œå®é™…ä¸é©¬è“‰æœ‰ä¸æ­£å½“å…³ç³»ã€‚è¢«æ›å…‰åæåŠ›ç‹¡è¾©ï¼Œä½†æœ€ç»ˆæ‰¿è®¤é”™è¯¯ã€‚",
      },
      {
        name: "å¼ èµ·æ·®å¾‹å¸ˆ",
        avatar: "https://images.unsplash.com/photo-1560250097-0b93528c311a?w=100&h=100&fit=crop&crop=face",
        persona: "ç»éªŒä¸°å¯Œçš„ç¦»å©šå¾‹å¸ˆï¼Œä¸ºç‹å®å¼ºä»£ç†æ¡ˆä»¶ã€‚è¯´è¯ä¸“ä¸šä¸¥è°¨ï¼Œé€»è¾‘æ¸…æ™°ã€‚",
      },
    ],
  },
  {
    id: "DRAMA2",
    name: "ç‰¹æœ—æ™®vsæ‹œç™»å¤§é€‰",
    description: "2020å¹´ç¾å›½å¤§é€‰ï¼Œç‰¹æœ—æ™®ä¸æ‹œç™»çš„æ¿€çƒˆå¯¹å†³ï¼Œäº‰è®®ä¸æ–­",
    avatar: "ğŸ—³ï¸",
    event_background: `2020å¹´ç¾å›½å¤§é€‰æ˜¯å†å²ä¸Šæœ€æ¿€çƒˆå’Œäº‰è®®çš„æ€»ç»Ÿé€‰ä¸¾ä¹‹ä¸€ã€‚ç°ä»»æ€»ç»Ÿç‰¹æœ—æ™®å¯»æ±‚è¿ä»»ï¼Œè€Œå‰å‰¯æ€»ç»Ÿæ‹œç™»ä»£è¡¨æ°‘ä¸»å…šæŒ‘æˆ˜ã€‚

ä¸»è¦äººç‰©ï¼š
- å”çº³å¾·Â·ç‰¹æœ—æ™®ï¼šç°ä»»æ€»ç»Ÿï¼Œå…±å’Œå…šå€™é€‰äººï¼Œå•†äººå‡ºèº«
- ä¹”Â·æ‹œç™»ï¼šå‰å‰¯æ€»ç»Ÿï¼Œæ°‘ä¸»å…šå€™é€‰äººï¼Œèµ„æ·±æ”¿æ²»å®¶
- å¡ç›æ‹‰Â·å“ˆé‡Œæ–¯ï¼šæ‹œç™»çš„å‰¯æ€»ç»Ÿæ­æ¡£ï¼Œé¦–ä½å¥³æ€§å‰¯æ€»ç»Ÿ
- è¿ˆå…‹Â·å½­æ–¯ï¼šç‰¹æœ—æ™®çš„å‰¯æ€»ç»Ÿï¼Œä¿å®ˆæ´¾
- åª’ä½“è®°è€…ï¼šCNNã€FOX Newsç­‰å„å¤§åª’ä½“
- é€‰æ°‘ï¼šæ”¯æŒä¸åŒå€™é€‰äººçš„ç¾å›½æ°‘ä¼—

äº‰è®®ç„¦ç‚¹ï¼š
- é‚®å¯„é€‰ç¥¨çš„åˆæ³•æ€§
- é€‰ä¸¾èˆå¼ŠæŒ‡æ§
- æ–°å† ç–«æƒ…å¯¹é€‰ä¸¾çš„å½±å“
- ç»æµæ”¿ç­–åˆ†æ­§
- ç§æ—é—®é¢˜å’Œç¤¾ä¼šæ­£ä¹‰`,
    dialogue_density: 4,
    npcs: [
      {
        name: "ç‰¹æœ—æ™®",
        avatar: "https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=100&h=100&fit=crop&crop=face",
        persona: 'è¯´è¯å¤¸å¼ ï¼Œå–œæ¬¢ç”¨"æœ€æ£’çš„"ã€"éš¾ä»¥ç½®ä¿¡"ç­‰è¯æ±‡ã€‚ç»å¸¸æ”»å‡»å¯¹æ‰‹ï¼Œå£°ç§°é€‰ä¸¾èˆå¼Šã€‚è¯´è¯é£æ ¼ç›´æ¥ï¼Œæœ‰æ—¶ç²—é²ã€‚',
      },
      {
        name: "æ‹œç™»",
        avatar: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=100&h=100&fit=crop&crop=face",
        persona: 'è¯´è¯æ¸©å’Œï¼Œå¼ºè°ƒå›¢ç»“å’Œæ²»æ„ˆã€‚ç»å¸¸æåˆ°"ç¾å›½çµé­‚"å’Œ"æ°‘ä¸»ä»·å€¼"ã€‚è¯´è¯æœ‰æ—¶ä¼šåœé¡¿æˆ–é‡å¤ã€‚',
      },
      {
        name: "å“ˆé‡Œæ–¯",
        avatar: "https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=100&h=100&fit=crop&crop=face",
        persona: 'è¯´è¯æœ‰åŠ›ï¼Œå¼ºè°ƒå¥³æƒå’Œå°‘æ•°æ—è£”æƒåˆ©ã€‚ç»å¸¸ç”¨"è®©æˆ‘ä»¬è°ˆè°ˆ"å¼€å¤´ã€‚',
      },
      {
        name: "CNNè®°è€…",
        avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",
        persona: "ä¸“ä¸šè®°è€…ï¼Œæé—®å°–é”ï¼Œè¿½æ±‚çœŸç›¸ã€‚ç»å¸¸è´¨ç–‘æ”¿å®¢çš„è¨€è®ºã€‚",
      },
    ],
  },
  {
    id: "DRAMA3",
    name: "ç”„å¬›ä¼ åå®«äº‰å® ",
    description: "æ¸…æœåå®«å¦ƒå«”äº‰å® ï¼Œç”„å¬›ä»çº¯çœŸå°‘å¥³åˆ°æƒè°‹å¥³ç‹çš„èœ•å˜",
    avatar: "ğŸ‘‘",
    event_background: `é›æ­£å¹´é—´ï¼Œåå®«ä½³ä¸½ä¸‰åƒï¼Œäº‰å® ä¸æ–­ã€‚ç”„å¬›åˆå…¥å®«æ—¶å¤©çœŸçƒ‚æ¼«ï¼Œä½†å¾ˆå¿«è¢«å·å…¥åå®«çš„æƒåŠ›æ–—äº‰ã€‚

ä¸»è¦äººç‰©ï¼š
- ç”„å¬›ï¼šå¥³ä¸»è§’ï¼Œä»çº¯çœŸåˆ°æƒè°‹çš„è½¬å˜
- åå¦ƒï¼šå¹´ç¾¹å°§ä¹‹å¦¹ï¼Œåš£å¼ è·‹æ‰ˆï¼Œæ·±å¾—çš‡ä¸Šå® çˆ±
- çš‡åï¼šä¹Œæ‹‰é‚£æ‹‰æ°ï¼Œè¡¨é¢è´¤æ·‘ï¼Œå†…å¿ƒç‹ æ¯’
- å®‰é™µå®¹ï¼šç”„å¬›çš„å¥½å‹ï¼Œåå› å«‰å¦’èƒŒå›
- æ²ˆçœ‰åº„ï¼šç”„å¬›çš„æŒšå‹ï¼Œæ¸©å©‰è´¤æ·‘
- çš‡ä¸Šï¼šé›æ­£å¸ï¼Œå¤šç–‘å–„å˜
- æœéƒ¡ç‹ï¼šçš‡ä¸Šçš„å¼Ÿå¼Ÿï¼Œä¸ç”„å¬›æœ‰æ„Ÿæƒ…çº è‘›

åå®«è§„åˆ™ï¼š
- å¦ƒå«”ç­‰çº§æ£®ä¸¥ï¼Œä»ç­”åº”åˆ°çš‡è´µå¦ƒ
- äº‰å® æ‰‹æ®µå¤šæ ·ï¼ŒåŒ…æ‹¬é™·å®³ã€ä¸‹æ¯’ã€å€Ÿåˆ€æ€äºº
- å®¶æ—èƒŒæ™¯å†³å®šåœ°ä½é«˜ä½
- å­å—£æ˜¯äº‰å® çš„é‡è¦ç­¹ç `,
    dialogue_density: 3,
    npcs: [
      {
        name: "ç”„å¬›",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "åˆå…¥å®«æ—¶å¤©çœŸçƒ‚æ¼«ï¼Œè¯´è¯æ¸©æŸ”ã€‚åæ¥å˜å¾—èªæ˜æœºæ™ºï¼Œè¯´è¯å¸¦æœ‰æ·±æ„ï¼Œå–„äºç”¨è¯—è¯è¡¨è¾¾æƒ…æ„Ÿã€‚",
      },
      {
        name: "åå¦ƒ",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "åš£å¼ è·‹æ‰ˆï¼Œè¯´è¯ç›´æ¥ï¼Œç»å¸¸å¨èƒåˆ«äººã€‚å–œæ¬¢ç‚«è€€è‡ªå·±çš„åœ°ä½å’Œå® çˆ±ã€‚",
      },
      {
        name: "çš‡å",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "è¡¨é¢è´¤æ·‘ï¼Œè¯´è¯æ¸©å’Œæœ‰ç¤¼ï¼Œä½†å†…å¿ƒç‹ æ¯’ã€‚ç»å¸¸ç”¨å…³å¿ƒçš„è¯è¯­æ¥æ©ç›–çœŸå®æ„å›¾ã€‚",
      },
      {
        name: "å®‰é™µå®¹",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "å‡ºèº«å‘å¾®ï¼Œè¯´è¯å°å¿ƒç¿¼ç¿¼ï¼Œå†…å¿ƒè‡ªå‘ã€‚åæ¥å˜å¾—å«‰å¦’å’Œç‹ æ¯’ã€‚",
      },
    ],
  },
  {
    id: "DRAMA4",
    name: "å¤ä»‡è€…è”ç›Ÿå†…æˆ˜",
    description: "è¶…çº§è‹±é›„å› ç†å¿µåˆ†æ­§è€Œåˆ†è£‚ï¼Œé’¢é“ä¾ vsç¾å›½é˜Ÿé•¿çš„ç»ˆæå¯¹å†³",
    avatar: "âš”ï¸",
    event_background: `ã€Šç¾å›½é˜Ÿé•¿3ï¼šå†…æˆ˜ã€‹äº‹ä»¶ã€‚ç”±äºè¶…çº§è‹±é›„çš„è¡ŒåŠ¨é€ æˆäº†å¤§é‡å¹³æ°‘ä¼¤äº¡ï¼Œè”åˆå›½è¦æ±‚æ‰€æœ‰è¶…çº§è‹±é›„ç­¾ç½²ã€Šç´¢ç§‘ç»´äºšåè®®ã€‹ï¼Œæ¥å—æ”¿åºœç›‘ç®¡ã€‚

ä¸»è¦äººç‰©ï¼š
- é’¢é“ä¾ ï¼šæ”¯æŒæ”¿åºœç›‘ç®¡ï¼Œè®¤ä¸ºéœ€è¦æ‰¿æ‹…è´£ä»»
- ç¾å›½é˜Ÿé•¿ï¼šåå¯¹æ”¿åºœç›‘ç®¡ï¼Œè®¤ä¸ºä¼šå¤±å»è‡ªç”±
- å†¬å…µï¼šå·´åŸºÂ·å·´æ©æ–¯ï¼Œç¾å›½é˜Ÿé•¿çš„æŒšå‹
- é»‘å¯¡å¦‡ï¼šå¨œå¡”èï¼Œåœ¨ä¸¤äººä¹‹é—´å·¦å³ä¸ºéš¾
- èœ˜è››ä¾ ï¼šè¢«é’¢é“ä¾ æ‹›å‹Ÿçš„å¹´è½»è‹±é›„
- é»‘è±¹ï¼šç“¦åè¾¾å›½ç‹ï¼Œä¸ºçˆ¶æŠ¥ä»‡
- å¹»è§†ï¼šæ”¯æŒé’¢é“ä¾ çš„ç«‹åœº
- ç»¯çº¢å¥³å·«ï¼šæ”¯æŒç¾å›½é˜Ÿé•¿

å†²çªæ ¸å¿ƒï¼š
- æ”¿åºœç›‘ç®¡ vs ä¸ªäººè‡ªç”±
- è´£ä»»ä¸åæœçš„æ‰¿æ‹…
- å‹è°Šä¸ç†å¿µçš„å†²çª
- å¤ä»‡ä¸æ­£ä¹‰çš„ç•Œé™`,
    dialogue_density: 4,
    npcs: [
      {
        name: "é’¢é“ä¾ ",
        avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",
        persona: "è¯´è¯å¹½é»˜ï¼Œç»å¸¸å¼€ç©ç¬‘ï¼Œä½†å†…å¿ƒæœ‰è´£ä»»æ„Ÿã€‚è®¤ä¸ºè¶…çº§è‹±é›„éœ€è¦è¢«ç›‘ç®¡ï¼Œé¿å…å†æ¬¡é€ æˆä¼¤å®³ã€‚",
      },
      {
        name: "ç¾å›½é˜Ÿé•¿",
        avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",
        persona: "è¯´è¯æ­£ç›´ï¼ŒåšæŒåŸåˆ™ã€‚è®¤ä¸ºæ”¿åºœç›‘ç®¡ä¼šé™åˆ¶è¶…çº§è‹±é›„çš„è‡ªç”±ï¼Œæ— æ³•åŠæ—¶æ‹¯æ•‘ä¸–ç•Œã€‚",
      },
      {
        name: "å†¬å…µ",
        avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",
        persona: "è¯´è¯ç®€æ´ï¼Œå†…å¿ƒç—›è‹¦ã€‚è¢«æ´—è„‘æ§åˆ¶æ—¶åšäº†å¾ˆå¤šåäº‹ï¼Œç°åœ¨åŠªåŠ›èµç½ªã€‚",
      },
      {
        name: "é»‘å¯¡å¦‡",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "è¯´è¯æœºæ™ºï¼Œå–„äºåˆ†æã€‚åœ¨é’¢é“ä¾ å’Œç¾å›½é˜Ÿé•¿ä¹‹é—´å·¦å³ä¸ºéš¾ï¼Œè¯•å›¾è°ƒè§£çŸ›ç›¾ã€‚",
      },
    ],
  },
  {
    id: "DRAMA5",
    name: "ç”„å¬›ä¼ ç°ä»£ç‰ˆ",
    description: "ç°ä»£èŒåœºç‰ˆç”„å¬›ä¼ ï¼Œå¤§å…¬å¸å†…éƒ¨æƒåŠ›æ–—äº‰å’ŒåŠå…¬å®¤æ”¿æ²»",
    avatar: "ğŸ’¼",
    event_background: `æŸçŸ¥åäº’è”ç½‘å…¬å¸å†…éƒ¨ï¼ŒCEOçªç„¶å®£å¸ƒé€€ä¼‘ï¼Œå¼•å‘äº†ä¸€åœºæ¿€çƒˆçš„æƒåŠ›äº‰å¤ºæˆ˜ã€‚å„éƒ¨é—¨æ€»ç›‘ä¸ºäº†äº‰å¤ºCEOèŒä½ï¼Œå±•å¼€äº†æ¿€çƒˆçš„ç«äº‰ã€‚

ä¸»è¦äººç‰©ï¼š
- ç”„å¬›ï¼šå¸‚åœºéƒ¨æ€»ç›‘ï¼Œèƒ½åŠ›å‡ºä¼—ï¼Œåˆå…¥å…¬å¸æ—¶çº¯çœŸ
- åå¦ƒï¼šé”€å”®éƒ¨æ€»ç›‘ï¼Œä¸šç»©çªå‡ºï¼Œæ€§æ ¼å¼ºåŠ¿
- çš‡åï¼šäººäº‹éƒ¨æ€»ç›‘ï¼Œè¡¨é¢å’Œå–„ï¼Œå†…å¿ƒç‹ æ¯’
- å®‰é™µå®¹ï¼šè´¢åŠ¡éƒ¨æ€»ç›‘ï¼Œç”„å¬›çš„é—ºèœœï¼Œåå› å«‰å¦’èƒŒå›
- æ²ˆçœ‰åº„ï¼šæŠ€æœ¯éƒ¨æ€»ç›‘ï¼Œç”„å¬›çš„æŒšå‹ï¼ŒæŠ€æœ¯è¿‡ç¡¬
- CEOï¼šå…¬å¸åˆ›å§‹äººï¼Œå³å°†é€€ä¼‘
- æœéƒ¡ç‹ï¼šå¤–éƒ¨æŠ•èµ„äººï¼Œä¸ç”„å¬›æœ‰æ„Ÿæƒ…çº è‘›

èŒåœºè§„åˆ™ï¼š
- ä¸šç»©å†³å®šåœ°ä½ï¼Œä½†äººé™…å…³ç³»åŒæ ·é‡è¦
- éœ€è¦ç«™é˜Ÿï¼Œé€‰æ‹©æ”¯æŒå“ªä½å€™é€‰äºº
- ä¿¡æ¯å°±æ˜¯æƒåŠ›ï¼ŒæŒæ¡å†…å¹•æ¶ˆæ¯å¾ˆå…³é”®
- è¡¨é¢å’Œè°ï¼Œæš—åœ°é‡Œå‹¾å¿ƒæ–—è§’`,
    dialogue_density: 3,
    npcs: [
      {
        name: "ç”„å¬›",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "åˆå…¥å…¬å¸æ—¶å¤©çœŸï¼Œè¯´è¯ç›´æ¥ã€‚åæ¥å˜å¾—èªæ˜ï¼Œè¯´è¯å¸¦æœ‰ç­–ç•¥æ€§ï¼Œå–„äºç”¨æ•°æ®è¯´è¯ã€‚",
      },
      {
        name: "åå¦ƒ",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "æ€§æ ¼å¼ºåŠ¿ï¼Œè¯´è¯å’„å’„é€¼äººã€‚ç»å¸¸ç‚«è€€è‡ªå·±çš„ä¸šç»©ï¼Œå–œæ¬¢å¨èƒç«äº‰å¯¹æ‰‹ã€‚",
      },
      {
        name: "çš‡å",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "è¡¨é¢å’Œå–„ï¼Œè¯´è¯æ¸©å’Œï¼Œä½†å†…å¿ƒç‹ æ¯’ã€‚ç»å¸¸ç”¨å…³å¿ƒçš„è¯è¯­æ¥æ©ç›–çœŸå®æ„å›¾ã€‚",
      },
      {
        name: "å®‰é™µå®¹",
        avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?w=100&h=100&fit=crop&crop=face",
        persona: "å‡ºèº«æ™®é€šï¼Œè¯´è¯å°å¿ƒç¿¼ç¿¼ï¼Œå†…å¿ƒè‡ªå‘ã€‚åæ¥å˜å¾—å«‰å¦’å’Œç‹ æ¯’ã€‚",
      },
    ],
  },
];

export default defineEventHandler(async (event) => {
  try {
    console.log("å¼€å§‹åˆå§‹åŒ–æ•°æ®åº“...");

    // åˆ›å»ºadminç”¨æˆ·
    const adminUser = await prisma.user.upsert({
      where: { username: "jerry" },
      update: {},
      create: {
        username: "jerry",
        nickname: "Jerry",
        password: "123123",
        avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",
        is_admin: true,
      },
    });

    console.log("Adminç”¨æˆ·åˆ›å»ºæˆåŠŸ:", adminUser.username);

    // åˆ›å»ºé¢„è®¾æˆ¿é—´
    for (const roomData of presetRooms) {
      const { npcs, ...roomInfo } = roomData;

      // åˆ›å»ºæˆ¿é—´
      const room = await prisma.room.upsert({
        where: { id: roomData.id },
        update: {
          name: roomInfo.name,
          description: roomInfo.description,
          avatar: roomInfo.avatar,
          event_background: roomInfo.event_background,
          dialogue_density: roomInfo.dialogue_density,
          creator_id: adminUser.id,
        },
        create: {
          id: roomData.id,
          name: roomInfo.name,
          description: roomInfo.description,
          avatar: roomInfo.avatar,
          event_background: roomInfo.event_background,
          dialogue_density: roomInfo.dialogue_density,
          creator_id: adminUser.id,
        },
      });

      console.log(`æˆ¿é—´åˆ›å»ºæˆåŠŸ: ${room.name}`);

      // åˆ›å»ºNPC
      for (const npcData of npcs) {
        await prisma.npc.upsert({
          where: {
            room_id_name: {
              room_id: room.id,
              name: npcData.name,
            },
          },
          update: {
            avatar: npcData.avatar,
            profile: npcData.persona,
          },
          create: {
            room_id: room.id,
            name: npcData.name,
            avatar: npcData.avatar,
            profile: npcData.persona,
          },
        });
      }

      console.log(`NPCåˆ›å»ºæˆåŠŸ: ${room.name}`);

      // è®©jerryç”¨æˆ·åŠ å…¥è¿™ä¸ªæˆ¿é—´
      await prisma.roomMember.upsert({
        where: {
          room_id_user_id: {
            room_id: room.id,
            user_id: adminUser.id,
          },
        },
        update: {},
        create: {
          room_id: room.id,
          user_id: adminUser.id,
          role_name: "ç¾¤ä¸»",
          role_profile: "æˆ¿é—´åˆ›å»ºè€…å’Œç®¡ç†å‘˜",
        },
      });

      console.log(`Jerryå·²åŠ å…¥æˆ¿é—´: ${room.name}`);
    }

    console.log("æ‰€æœ‰é¢„è®¾æˆ¿é—´åˆ›å»ºå®Œæˆï¼");

    return {
      success: true,
      message: "æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ",
      rooms: presetRooms.map((r) => r.name),
    };
  } catch (error) {
    console.error("æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥:", error);
    return {
      success: false,
      error: error.message,
    };
  } finally {
    await prisma.$disconnect();
  }
});
