# 🚀 立即部署到Railway

## ✅ 代码已推送到GitHub！

仓库地址：https://github.com/weichen0407/ai-news-chat

---

## 📝 接下来只需3步

### 🔹 步骤1：访问Railway

打开浏览器，访问：https://railway.app

点击右上角 **"Login"** 或 **"Start a New Project"**

### 🔹 步骤2：连接GitHub仓库

1. 点击 **"Deploy from GitHub repo"**
2. 如果是第一次使用，会要求授权GitHub
3. 授权后，找到并选择：**weichen0407/ai-news-chat**
4. 点击 **"Deploy Now"**

Railway会自动：
- ✅ 检测到Dockerfile
- ✅ 开始构建（约3-5分钟）
- ✅ 自动部署

### 🔹 步骤3：配置环境变量

构建完成后（或构建期间）：

1. 点击你的服务（service）
2. 点击顶部的 **"Variables"** 标签
3. 点击 **"New Variable"**
4. 添加以下变量：

```
变量名: DEEPSEEK_API_KEY
变量值: sk-da419e3d9ba94926991572267c0c086a
```

可选但建议添加：
```
变量名: SESSION_SECRET
变量值: （随机字符串，如：abc123xyz789...）
```

5. 点击 **"Add"** 保存

---

## 🌐 获取访问链接

配置完环境变量后，Railway会自动重新部署。

部署成功后：
1. 点击 **"Settings"** 标签
2. 滚动到 **"Domains"** 部分
3. 点击 **"Generate Domain"**
4. 复制生成的URL，例如：
   ```
   https://ai-news-chat-production.up.railway.app
   ```

---

## 🎉 访问你的应用

### 主页
```
https://你的域名.up.railway.app/
```

### 管理后台
```
https://你的域名.up.railway.app/admin/login

用户名：jerry
密码：123123
```

---

## 🔍 监控部署状态

### 在Railway控制台

**Deployments（部署）标签**：
- 查看构建日志
- 确认部署状态（应该显示绿色的"Active"）

**Logs（日志）标签**：
- 查看应用运行日志
- 确认启动成功的标志：
  ```
  ✅ 数据库连接成功
  ✅ 所有检查通过，启动Nuxt应用...
  Listening on http://0.0.0.0:3000
  ```

**Metrics（指标）标签**：
- CPU使用率
- 内存使用率
- 网络流量

---

## 📊 预期构建时间

```
[0/5] 准备构建环境...          ⏱️ 30秒
[1/5] 下载依赖包...            ⏱️ 1-2分钟
[2/5] 构建Nuxt应用...          ⏱️ 1-2分钟
[3/5] 创建Docker镜像...        ⏱️ 30秒
[4/5] 推送镜像...              ⏱️ 30秒
[5/5] 启动应用...              ⏱️ 10秒

总计：约 3-5 分钟
```

---

## ⚠️ 常见问题

### Q1: 构建失败？
**解决方法：**
1. 查看Deployments标签的错误日志
2. 确认环境变量是否正确设置
3. 如果需要，点击右上角 **"Redeploy"** 重新部署

### Q2: 访问502/503错误？
**可能原因：**
- 应用还在启动中（等待1-2分钟）
- 环境变量未设置（特别是DEEPSEEK_API_KEY）
- 查看Logs标签确认应用状态

### Q3: 没有生成域名？
**解决方法：**
1. Settings → Domains
2. 点击 "Generate Domain"
3. 等待几秒钟

### Q4: 环境变量设置后没效果？
**解决方法：**
- Railway会自动重新部署
- 或手动重新部署：Deployments → 最新部署 → 三个点 → Redeploy

---

## 🎯 快速验证清单

部署完成后，逐项检查：

- [ ] Railway显示"Active"状态（绿色）
- [ ] 已生成公网域名
- [ ] 可以访问首页
- [ ] 可以注册/登录
- [ ] 可以访问管理后台（/admin/login）
- [ ] 可以创建房间
- [ ] AI对话功能正常
- [ ] 实时监控显示数据

---

## 💰 费用说明

### 免费额度
- **$5** 免费额度（新用户）
- 大约可运行 **180小时**

### 计费方式
- 按分钟计费：$0.000463/分钟
- 512MB内存免费
- 100GB流量免费

### 建议
- 开发测试阶段：免费额度足够
- 正式运营：升级到Hobby计划（$5/月）

---

## 📱 下一步

部署成功后，你可以：

1. **配置自动化**
   - 访问管理后台
   - 进入"智能控制"
   - 设置房间自动发言

2. **创建预设房间**
   - 使用现有的预设剧情
   - 或创建自定义房间

3. **邀请测试**
   - 分享你的Railway URL
   - 让朋友注册测试

4. **监控使用**
   - 关注Token使用量
   - 查看Railway Metrics

---

## 🆘 需要帮助？

### Railway官方
- 文档：https://docs.railway.app
- Discord社区：https://discord.gg/railway

### 项目文档
- 查看 `RAILWAY部署步骤.md`（详细版）
- 查看 `完整功能说明.md`

---

## 🎊 准备好了吗？

### 现在就开始吧！

1. 打开：https://railway.app
2. 部署：weichen0407/ai-news-chat
3. 配置：添加环境变量
4. 访问：你的应用！

**祝部署顺利！🚀**

